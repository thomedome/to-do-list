<html>

<head>
    <link href="./css/custom.css" rel="stylesheet"> <!-- custom css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- bootstrap -->

    <script>
        function getList(str) {

            let xml = new XMLHttpRequest();
            xml.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("listEntries").innerHTML = this.responseText;
                }
            }
            xml.open("GET", "list.php?q=" + str, true);
            xml.send();
        }

        function createEntry(str) {
            if (str == "") {
                document.getElementById("warningsText").innerHTML = "Empty String";
            } else {
                let xml = new XMLHttpRequest();
                xml.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("warningsText").innerHTML = this.responseText;
                    }
                }
                xml.open("GET", "add.php?q=" + str, true);
                xml.send();
            }
            location.reload()
        }

        function removeEntry(str) {
            if (str == "") {
                document.getElementById("warningsText").innerHTML = "";
            } else {
                let xml = new XMLHttpRequest();
                xml.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        document.getElementById("warningsText").innerHTML = this.responseText;
                    }
                }
                xml.open("GET", "remove.php?q=" + str, true);
                xml.send();
            }
            location.reload()
        }

        getList("");
    </script>

</head>

<body>
    <br><br><br>
    <h1 id="title" class="text-center">To-Do List</h1>
    <h4 class="text-center">by thomedome</h4>
    <a href="https://github.com/thomedome/to-do-list" class="text-center"><p>GitHub Repo</p></a>
    <br>
    <p id="warningsText"></p>
    <br>


    <h4 class="text-center">Search Here:</h4>
    <input type="text" id="searchTextBox" onkeyup="getList(this.value)">
    <br><br><br>
    <div id="listEntries" class="d-flex align-items-center"></div>
    <br><br><br>
    <div class="row">
        <div class="col-5"></div>
        <div class="row col-3">
            <input type="text" class="col-8" id="createText">
            <div class="col-1"></div>
            <input type="button" class="col-3" value="Add To List" onclick="createEntry(document.getElementById('createText').value)"></input>
        </div>
        <div class="col-3"></div>
    </div> 
</body>

</html>